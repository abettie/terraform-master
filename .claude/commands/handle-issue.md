# Issue対応ワークフロー自動化コマンド

引数として受け取ったIssue番号（または指定がない場合は最新のオープンIssue）に対して、以下のワークフローを実行してください：

## 処理フロー

1. **Issue情報の取得**
   - 引数でIssue番号が指定されている場合: その番号のIssueを取得
   - 引数がない場合: 最新のオープンIssueを取得
   - `gh issue view [番号]` コマンドを使用してIssue内容を確認

2. **作業ブランチの作成**
   - masterブランチから新しいブランチを作成
   - ブランチ名の形式: `feature/[Issue番号]-[Issue タイトルのスラッグ化]`
   - ブランチ名は数字、小文字アルファベット、記号のみとし、マルチバイト文字は含めない
   - 基本的にIssueタイトルからブランチ名を作成し、単語間はハイフンで埋め、35文字以内に収める
   - 例: Issue #3 "README作成" → `feature/3-add-readme`

3. **Issue内容に基づく作業実行**
   - Issueの本文に記載された内容を実装
   - 必要なファイルの作成・修正を行う
   - コーディング規約に従って実装

4. **Terraform構文チェック**
   - `aws sso login --profile terraform-master` を実行
   - ログインが成功したら`AWS_PROFILE=terraform-master; terraform plan` を実行
   - エラーが発生した場合:
     - エラーメッセージを確認し、原因を特定
     - 該当するTerraformファイルを修正
     - 再度 `AWS_PROFILE=terraform-master; terraform plan` を実行
     - エラーがなくなるまで修正とplanを繰り返す
   - planが成功したら次のステップへ進む

5. **変更のコミット**
   - この作業は前工程のterraform planが成功してから行う
   - 変更をステージング
   - コミットメッセージは日本語で簡潔に記述
   - コミットメッセージの例: "READMEファイルを追加"

6. **プルリクエストの作成**
   - 作業ブランチをリモートにプッシュ
   - masterブランチに対するプルリクエストを作成
   - PRのタイトル: 日本語でわかりやすく（Issueのタイトルを参考に）
   - PRの説明欄に以下を含める:
     - 変更内容の簡潔な説明
     - `Close #[Issue番号]` を記載してIssueと紐付け

## 注意事項

- 作業中に不明点や選択肢がある場合は、ユーザーに確認を求めること
- 既存ファイルの大幅な変更を伴う場合は、変更前にユーザーに確認すること
- エラーが発生した場合は、適切にユーザーに報告すること
